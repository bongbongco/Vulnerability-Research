# Ubuntu apt-get Trubleshooting

우분투 설치 시 수행하는 여러가지 일들 중 하나가 저장소 주소 변경이다. 한국에서는 대부분 *ftp.daumkakao.com*을 설정하여 사용한다. 그런데 저장소로(*ftp.daumkakao.com*을 포함한 다른 저장소들 모두)  직접 접근은 되는 데, *apt-get* 명령어를 통해서는 동작하지 않을 때가 있다. 회사 내부에서 우분투를 사용하기 위해서 설정하던 중 해결 방안을 찾고 정리한다.

>저장소 주소 변경 작업
>Vim /etc/apt/source.list
>:%s/kr.archive.ubuntu.com/ftp.daumkakao.com/g
>apt-get clean
>apt-get update

## Truble Shooting
### <i class="icon-bug"></i> 문제 확인
아래 명령어를 수행하여 문제점을 찾아보자.
```sh
apt-get -o Debug::Acquire::http=true update
strace -s 1024 apt-get update
```
본인의 경우 `User-Agent: Debian APT-HTTP/1.3`를 보고 *User-Agent*를 변경하는 것으로 *apt*를 정상적으로 사용할 수 있었다.

### <i class="icon-keyboard"></i> /etc/apt/apt.conf 파일 생성 및 수정
- `/etc/apt/apt.conf` 파일을 생성한다.
```sh
sudo vi /etc/apt/apt.conf
```
- *User Agent*를 Mozilla로 수정한다.
```sh
Acquire
{
  http::User-Agent "Mozilla/5.0 (Windows NT 5.1; rv:25.0) Gecko/20100101 Firefox/25.0";
};
```
### <i class="icon-keyboard"></i> *apt* 업데이트
```sh   
sudo apt-get update
```

