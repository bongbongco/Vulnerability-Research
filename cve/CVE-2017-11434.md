# CVE-2017-11434

많은 사람들이 이용하는 가상화 소프트웨어 [QEMU](http://www.qemu.org)에서  OOB(Out of Bound) Read와 관련된 취약점이 발견되었다. 

>**착각할 수 있는 용어**
>TCP/IP 환경에서 **OOB(Outbound Of Band)**란 인터넷 접속 시 데이터 송, 수신에 대한 통제정보를 보낼 때 사용하는 패킷으로 일반적인 데이터에 비해 높은 우선권을 부여 받아 전송되며, 접속 해지 등 예외적인 상황을 데이터 송수신 중간에 상대방에게 보내기 위해 사용된다. 이 때 TCP/IP 헤더의 URGENT 비트를 '1'로 설정함으로서 OOB데이터임을 표시한다. 


[bugzilla](https://bugzilla.redhat.com/show_bug.cgi?id=1472611)에서 취약점이 발생 소스코드를 살펴보자.

```cpp
---
 slirp/bootp.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/slirp/bootp.c b/slirp/bootp.c
index 5a4646c..5dd1a41 100644
--- a/slirp/bootp.c
+++ b/slirp/bootp.c
@@ -123,6 +123,9 @@ static void dhcp_decode(const struct bootp_t *bp, int 
*pmsg_type,
             if (p >= p_end)
                 break;
             len = *p++;
+            if (p + len > p_end) {
+                break;
+            }
             DPRINTF("dhcp: tag=%d len=%d\n", tag, len);
 
             switch(tag) {
-- 
```

소스코드에서 간단히 확인할 수 있듯이 클라이언트가 전송한 DHCP 옵션 구문을 해석하는 과정에서 길이 검증 로직이 존재하지 않아 경계선 밖의 메모리에 접근하는 취약점이 발생하였고 **if**문을 추가하여 조치한 것을 확인할 수 있다.