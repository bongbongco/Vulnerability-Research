# WAV 파일 구조

웨이브 파일 형식은 멀티미디어 파일 저장을 위한 마이크로소프트의 RIFF 사양의 하위 집합니다. RIFF 파일은 데이터 청크가 붙은 파일 헤더로 시작한다. 웨이브 파일은 데이터 형식을 지정하는 `fmt` 청크와 실제 샘플 데이터가 들어있는 `data`청크라는 두 개의 하위 청크로 구성된 단일 `wave` 청크가 있는 RIFF 파일인 경우가 많다. 

|endian|field name|field size(bytes)|comment|
|---|---|---|---|
|big|ChunkID|4|"RIFF" 청크 설명자|
|little|ChunkSize|4|"RIFF" 청크 설명자|
|big|Format|4|"RIFF" 청크 설명자|
|big|Subchunk1ID|4|"fmt" 하위 청크|
|little|Subchunk1Size|4|"fmt" 하위 청크|
|little|AudioFormat|2|"fmt" 하위 청크|
|little|NumChannels|2|"fmt" 하위 청크|
|little|SampleRate|4|"fmt" 하위 청크|
|little|ByteRate|4|"fmt" 하위 청크|
|little|BlockAlign|2|"fmt" 하위 청크|
|little|BitsPerSample|2|"fmt" 하위 청크|
|big|Subchunk2ID|2|"data" 하위 청크|
|little|Subchunk2Size|4|"data" 하위 청크|
|little|data|4|"data" 하위 청크|


- WAVE 형식은 RIFF 헤더로 시작한다.

|offset|size|name|comment|
|--|--|--|--|
|0|4|ChunkID|'RIFF'문자가 ASCII 양식 (0x52494646 빅 엔디안 양식)으로 들어 있다.|
|4|4|ChunkSize|36 + SubChunk2Size 혹은 보다 정확한 수치: 4 + (8 + SubChunk1Size) + (8 +SubChunk2Size)<br/>이것은 ChunkID 및 ChunkSize를 제외한 전체 파일 크기이다.|
|8|4|Format|'WAVE'(0x57415645 빅 엔디안 양식) 문자가 들어 있다.|


- WAVE 형식은 "fmt"와 "data" 두 개의 하위 청크로 이루어져 있다.
- "fmt" 하위 청크는 사운드 데이터를 설명한다.


|offset|size|name|comment|
|--|--|--|--|
|12|4|Subchunk1ID|'fmt'(0x666d7420 빅 엔디안 양식) 문자가 들어 있다.|
|16|4|Subchunk1Size|16 for PCM. 다음에 오는 나머지 하위 청크의 크기|
|20|2|AudioFormat|PCM = 1. 압축 형식으 ㄹ나타낸다.|
|22|2|NumChannels|Mono = 1, Stereo = 2, etc.|
|24|4|SampleRate|8000, 44100, etc.|
|28|4|ByteRate|== SampleRate * NumChannels * BitsPerSample/8|
|32|2|BlockAlign|== NumChannels * BitsPerSample/8<br/>모든 채널을 포함하여 하나의 샘플에 대한 바이트 수 이다.(숫자가 아니라면 어떻게 될까.)|
|34|2|bitsPerSample|8 bits = 8, 16 bits = 16, etc|


- "data" 하위 청크는 살제 사운드와 데이터 크기를 포함한다.


|offset|size|name|comment|
|--|--|--|--|
|36|4|Subchunk2ID|'데이터'(0x64617461 빅 엔디안 양식) 문자가 들어 있다.|
|40|4|Subchunk2Size|== NumSamples * NumChannels * BitsPerSample/8<br/>데이터 바이트 수로 다음 필드의 읽기 데이터로 이해할 수 있다.|
|44|*|Data|실제 사운드 데이터.|

## Notes
- WAVE 데이터 파일의 기본 바이트 순서는 리틀 엔디안이다. 빅 엔디안 바이트 순서 체계를 사용하여 작성된 파일은 RIFF 대신 RIFX 식별자를 갖는다. 
- 샘플 데이터는 짝수 바이트 경계에서 끝나야한다. 무엇을 의미 하던지. 
- 8 비트 샘플은 0에서 255까지의 부호없는 바이트로 저장된다. 16 비트 샘플은 -32768에서 32767에 이르는 2의 보수 부호있는 정수로 저장된다. 
- 웨이브 데이터 스트림에 추가 서브 청크가있을 수 있다. 그렇다면 각각은 char [4] SubChunkID와 unsigned long SubChunkSize 및 SubChunkSize 데이터 양을 갖는다. 
- RIFF는 자원 교환 파일 형식을 나타냅니다. 
 
###  RIFF 파일에 저장 될 수있는 데이터  
- 오디오 / 비주얼 인터리브 데이터 (.AVI) 
- 파형 데이터 (.WAV) 
- 비트 맵 데이터 (.RDI) 
- MIDI 정보 (.RMI) 
- 색상 표 (.PAL) 
- 멀티미디어 영화 (.RMN) 
- 애니메이션 커서 (.ANI) 
- 다른 RIFF 파일 (.BND) 묶음 

>본문 출처
>http://soundfile.sapp.org/doc/WaveFormat/

